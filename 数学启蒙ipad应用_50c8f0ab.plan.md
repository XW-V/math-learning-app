---
name: 数学启蒙iPad应用
overview: 为6岁半儿童设计一个基于Web的数学启蒙应用，支持20以内加减法，包含动画数感培养、Duolingo式奖励反馈、计时记分和可自定义难度。
todos:
  - id: setup_structure
    content: 创建项目文件结构和基础HTML框架，包含主页面布局和基本样式
    status: completed
  - id: question_system
    content: 实现题目生成系统，支持20以内加减法，包含难度自定义功能
    status: completed
    dependencies:
      - setup_structure
  - id: number_sense_animations
    content: 开发数感培养动画：实物计数动画，加法显示两种不同图案，每行5个，减法gray out末尾图案
    status: completed
    dependencies:
      - question_system
  - id: feedback_system
    content: 实现Duolingo式奖励反馈系统：正确/错误音效、动画反馈、连击奖励
    status: completed
    dependencies:
      - number_sense_animations
  - id: score_timer
    content: 实现计时和记分系统，包含答题统计、最佳成绩记录
    status: completed
    dependencies:
      - question_system
  - id: ui_polish
    content: 优化UI/UX设计，确保iPad触摸友好，横屏布局，护眼色背景，动画显示按钮
    status: completed
    dependencies:
      - feedback_system
      - score_timer
  - id: testing
    content: 在iPad mini上测试应用，优化性能和交互体验
    status: pending
    dependencies:
      - ui_polish
---

# 数学启蒙iPad应用开发计划

## 项目概述

开发一个响应式Web应用，专为iPad mini优化，帮助6岁半儿童学习20以内加减法。应用将使用动画培养数感，提供类似Duolingo的奖励反馈系统，并包含计时和记分功能。

## 技术栈

- **前端框架**: 纯HTML/CSS/JavaScript（无需构建工具，便于部署）
- **动画库**: CSS3动画 + JavaScript动画控制
- **音频**: Web Audio API 或 HTML5 Audio
- **响应式设计**: 针对iPad mini 横屏 (2266x1488) 优化

## 核心功能模块

### 1. 题目生成系统

- 随机生成20以内加减法题目
- 支持自定义难度设置（如：仅加法、仅减法、混合、数字范围限制）
- 题目难度渐进（可选）

### 2. 数感培养动画

- **实物计数动画**：使用丰富的图标（动物、家具、交通工具、星球、食物、自然、玩具、运动等）进行可视化计数
- **加法动画**：
  - 显示两种不同图案，从同一类别中选择
  - 两种图案使用不同色系区分（如橙色和蓝色）
  - 每行最多5个图案，自动换行
  - 第二组图案填充在第一组末尾
- **减法动画**：
  - 显示单一图案
  - 从末尾开始gray out减掉的个数
- **动画控制**：初始隐藏动画，提供手指图标按钮，点击后显示动画

### 3. 奖励反馈系统（参考Duolingo）

- **正确反馈**：
  - 欢快的音效
  - 动画效果（如星星闪烁、彩虹、笑脸）
  - 鼓励文字
- **错误反馈**：
  - 温和的提示音
  - 友好的错误提示动画
  - 显示正确答案并解释
- **连续答对奖励**：连击系统，连续答对显示特殊动画

### 4. 计时记分系统

- 计时器显示（可选：限时模式或自由模式）
- 分数统计（答对题数、准确率）
- 最佳成绩记录
- 答题速度统计

### 5. 用户界面

- **横屏布局**：专为iPad mini横屏（2266x1488）优化
  - 左侧信息栏（分数、连击、时间、设置）
  - 主内容区采用两列网格布局
  - 左侧：动画展示区
  - 右侧：答案输入区和数字键盘
  - 顶部：题目显示区（跨两列）
- **护眼设计**：
  - 背景色：护眼绿色（#C8E6C9）
  - 卡片背景：淡黄色护眼（#FFF9E6）
  - 文字颜色：淡黄色护眼替代白色
- **大按钮设计**：适合儿童操作，最小尺寸60x60px
- **丰富的图标库**：100+个图标，8个类别（动物、家具、交通工具、星球、食物、自然、玩具、运动）
- **触摸友好的交互设计**

## 文件结构

```
math-learning-app/
├── index.html              # 主页面
├── css/
│   ├── style.css           # 主样式文件
│   └── animations.css      # 动画样式
├── js/
│   ├── app.js              # 主应用逻辑
│   ├── questionGenerator.js  # 题目生成器
│   ├── animationController.js # 动画控制器
│   ├── scoreSystem.js      # 计分系统
│   └── audioManager.js     # 音频管理
├── assets/
│   ├── sounds/
│   │   ├── correct.mp3     # 正确音效
│   │   ├── wrong.mp3       # 错误音效
│   │   └── success.mp3     # 成功音效
│   └── images/             # 动画素材（可选）
└── README.md               # 使用说明
```

## 实现细节

### 题目生成逻辑

- 生成1-20范围内的随机数
- 确保答案在0-20范围内
- 支持加法（a + b = ?）和减法（a - b = ?）
- 可配置题目类型和难度

### 动画实现

- **实物计数**：使用CSS动画展示对象出现、移动、消失
- **数轴动画**：SVG或Canvas绘制数轴，动画展示数字跳跃
- 使用`requestAnimationFrame`确保流畅动画

### 奖励系统

- 答对：播放音效 + 显示星星/彩虹动画 + 增加分数
- 答错：播放提示音 + 显示正确答案动画 + 温和提示
- 连击：连续答对3题、5题、10题时显示特殊奖励

### 计时系统

- 使用`setInterval`或`requestAnimationFrame`实现计时
- 支持暂停/继续功能
- 显示已用时间和平均答题时间

### 响应式设计

- 使用viewport meta标签优化iPad显示
- 使用flexbox/grid布局适配不同屏幕
- 按钮最小尺寸44x44px（Apple推荐）

## UI/UX设计要点

1. **色彩方案**：
   - 护眼绿色背景（#C8E6C9）
   - 淡黄色护眼卡片和文字（#FFF9E6）
   - 图标按类别使用不同色系（橙色、蓝色、红色、绿色、紫色、黄色、青色等）
   - 加法运算中同一类别的两个图案使用不同色系区分
2. **字体**：使用大号、易读的字体（至少24px，题目48px）
3. **交互反馈**：按钮按下有视觉反馈和缩放动画
4. **进度指示**：显示分数、连击、时间、准确率
5. **设置界面**：简单的难度和模式选择
6. **动画控制**：初始隐藏动画，提供手指图标按钮控制显示

## 开发步骤

1. ✅ 创建基础HTML结构和样式框架
2. ✅ 实现题目生成和显示逻辑
3. ✅ 开发动画系统（实物计数动画）
4. ✅ 集成音频反馈系统
5. ✅ 实现计分和计时功能
6. ✅ 添加奖励动画和连击系统
7. ✅ 优化iPad横屏布局和触摸交互
8. ✅ 实现护眼色设计
9. ✅ 添加丰富的图标库（100+个图标）
10. ✅ 实现动画显示控制按钮
11. ⏳ 在iPad mini上测试应用，优化性能和交互体验

## 已实现功能

- ✅ 本地存储保存最佳成绩和设置
- ✅ 丰富的图标库（8个类别，100+个图标）
- ✅ 护眼配色方案
- ✅ 横屏布局优化
- ✅ 动画显示控制
- ✅ 加法/减法动画区分
- ✅ 连击奖励系统

## 扩展功能（可选）

- 多种主题选择
- 更多动画效果
- 家长报告功能
- 多语言支持
- 语音提示功能